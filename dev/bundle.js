/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={127:function(t){t.exports=function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=13)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapRange=function(t,e,r,n,o){return n+(o-n)/(r-e)*(t-e)},e.getRGB=function(t,e,r){var n=r*(t.width<<2)+(e<<2);return{r:t.data[n],g:t.data[n+1],b:t.data[n+2]}},e.trunc=function(t){return t>255?255:t<0?0:t},e.range=function(t,e){return Array.from(new Array(e-t+1).keys()).map((function(e){return e+t}))},e.clampByte=function(t){return t>255?255:t<0?0:t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(r(12)),i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.width,n=e.height,o=e.colorProcessor,i=e.data,s=void 0===i?[]:i,c=e.meta,u=void 0===c?{}:c;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.width=r,this.height=n,this.data=s,this.meta=u,this.colorProcessor=o}return n(t,[{key:"getAt",value:function(t,e){return this.data[t+this.width*e]}},{key:"process",value:function(t){var e=this;return this.data.forEach((function(r){t(r,e.colorProcessor)})),this}},{key:"toImageData",value:function(){for(var t=[],e=void 0,r=0;r<this.data.length;r++)e=this.data[r],t[t.length]=e.r,t[t.length]=e.g,t[t.length]=e.b,t[t.length]=255;return new ImageData(new Uint8ClampedArray(t),this.width,this.height)}}],[{key:"fromImageData",value:function(e){for(var r=new Uint32Array(e.data.buffer),n=r.length,i=new Array(n),s=n,c=void 0;s--;)c=r[s],i[s]={r:255&c,g:c>>8&255,b:c>>16&255};return new t({data:i,width:e.width,height:e.height,colorProcessor:o.default})}},{key:"fromHTMLImageElement",value:function(e){var r=document.createElement("canvas"),n=r.getContext("2d"),o=e.naturalWidth,i=e.naturalHeight;return r.width=o,r.height=i,n.drawImage(e,0,0),t.fromImageData(n.getImageData(0,0,o,i))}}]),t}();e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(3);r(23),r(25);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"read",value:function(){var t=this;return o.Observable.create((function(e){return t.onRead(e),t.onDispose.bind(t)}))}},{key:"onRead",value:function(){}},{key:"onDispose",value:function(){}}]),t}();e.default=i},function(t,e,r){"use strict";var n=r(4),o=r(16),i=r(22),s=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=o.toSubscriber(t,e,r);if(n?n.call(i,this.source):i.add(this.source?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?e=n.root.Rx.config.Promise:n.root.Promise&&(e=n.root.Promise)),!e)throw new Error("no Promise impl found");return new e((function(e,n){var o;o=r.subscribe((function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)}),n,e)}))},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[i.observable]=function(){return this},t.create=function(e){return new t(e)},t}();e.Observable=s},function(t,e,r){"use strict";(function(t){var r="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=r||void 0!==t&&t||n;e.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(e,r(15))},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(8),i=r(17),s=r(10),c=r(11),u=function(t){function e(r,n,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!r){this.destination=s.empty;break}if("object"==typeof r){r instanceof e?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new a(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new a(this,r,n,o)}}return n(e,t),e.prototype[c.rxSubscriber]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(i.Subscription);e.Subscriber=u;var a=function(t){function e(e,r,n,i){t.call(this),this._parentSubscriber=e;var c,u=this;o.isFunction(r)?c=r:r&&(c=r.next,n=r.error,i=r.complete,r!==s.empty&&(u=Object.create(r),o.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=c,this._error=n,this._complete=i}return n(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u)},function(t,e,r){"use strict";function n(t,e,r){return t.process((function(t,n){n.mul(t,e).add(t,r).clamp(t)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return function(r){return n(r,t,e)}},e.linearTransformation=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SIMPLE_CHARSET=e.ASCII_CHARSET=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),i=function(t){return t&&t.__esModule?t:{default:t}}(r(34)),s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.options=Object.assign({},{charset:c,fontFamily:"monospace"},e),this.fontmap=t.buildFont(this.options.charset,{fontFamily:this.options.fontFamily}),this.matchChar=function(t){return t._cache=[],function(e){return t._cache[e]||(t._cache[e]=t(e))}}(this.matchChar.bind(this))}return n(t,[{key:"render",value:function(t){return this.processImage(t)}},{key:"processImage",value:function(t){for(var e=t.data.length,r=void 0;e--;)(r=t.data[e]).char=this.matchChar(r.mono);return t}},{key:"matchChar",value:function(t){for(var e={brightness:-1},r=0;r<this.fontmap.length;r++){var n=this.fontmap[r];if(!(Math.abs(t-n.brightness)<=Math.abs(t-e.brightness)))return e.char;e=n}return e.char}}],[{key:"buildFont",value:function(t,e){return(0,i.default)(t,e)}}]),t}();e.default=s;var c=e.ASCII_CHARSET=(0,o.range)(32,126).map((function(t){return String.fromCharCode(t)}));e.SIMPLE_CHARSET=[".",":","*","I","$","V","F","N","M"]},function(t,e,r){"use strict";e.isFunction=function(t){return"function"==typeof t}},function(t,e,r){"use strict";e.errorObject={e:{}}},function(t,e,r){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,r){"use strict";var n=r(4).root.Symbol;e.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default={mul:function(t,e){return t.r=~~(t.r*e),t.g=~~(t.g*e),t.b=~~(t.b*e),this},add:function(t,e){return t.r+=e,t.g+=e,t.b+=e,this},addc:function(t,e){var r=e.r,n=e.g,o=e.b;return t.r+=r,t.g+=n,t.b+=o,this},div:function(t,e){return this.mul(t,1/e)},inverse:function(t){return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this},getGrayscale:function(t){return~~((t.r+t.g+t.b)/3)},desaturate:function(t){return t.r=t.g=t.b=this.getGrayscale(t),this},clamp:function(t){return t.r=(0,n.clampByte)(t.r),t.g=(0,n.clampByte)(t.g),t.b=(0,n.clampByte)(t.b),this}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.charset=e.render=e.filter=e.read=e.aa=void 0;var o=n(r(14)),i=n(r(27)),s=n(r(28)),c=n(r(6)),u=n(r(29)),a=n(r(30)),l=n(r(31)),f=n(r(32)),h=n(r(33)),p=n(r(35)),d=r(7),b=n(r(36));e.aa=b.default;var y=e.read={image:{fromHTMLImage:o.default.fromHTMLImage,fromURL:o.default.fromURL},imageData:{fromImageData:s.default.fromImageData,fromCanvas:s.default.fromCanvas},video:{fromVideoElement:i.default.fromVideoElement}},v=e.filter={linear:c.default,brightness:u.default,contrast:a.default,inverse:l.default,desaturate:f.default},g=e.render={html:h.default,canvas:p.default},m=e.charset={SIMPLE_CHARSET:d.SIMPLE_CHARSET,ASCII_CHARSET:d.ASCII_CHARSET};e.default={aa:b.default,read:y,filter:v,render:g,charset:m}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=n(r(2)),s=n(r(1)),c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.url=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"onRead",value:function(t){var e=document.createElement("img");e.crossOrigin="Anonymous";var r=function(){o(),t.next(s.default.fromHTMLImageElement(e)),t.complete()},n=function(e){o(),t.error(e)},o=function(){e.removeEventListener("load",r),e.removeEventListener("error",n)};e.addEventListener("load",r),e.addEventListener("error",n),e.complete&&e.naturalWidth?r():this.url&&(e.src=this.url)}}],[{key:"fromURL",value:function(t){return new e(t).read()}},{key:"fromHTMLImage",value:function(t){return e.fromURL(t.src)}}]),e}(i.default);e.default=c},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n=r(5),o=r(11),i=r(10);e.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[o.rxSubscriber])return t[o.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(i.empty)}},function(t,e,r){"use strict";function n(t){return t.reduce((function(t,e){return t.concat(e instanceof a.UnsubscriptionError?e.errors:e)}),[])}var o=r(18),i=r(19),s=r(8),c=r(20),u=r(9),a=r(21),l=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this,l=r._parent,f=r._parents,h=r._unsubscribe,p=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var d=-1,b=f?f.length:0;l;)l.remove(this),l=++d<b&&f[d]||null;if(s.isFunction(h)&&c.tryCatch(h).call(this)===u.errorObject&&(e=!0,t=t||(u.errorObject.e instanceof a.UnsubscriptionError?n(u.errorObject.e.errors):[u.errorObject.e])),o.isArray(p))for(d=-1,b=p.length;++d<b;){var y=p[d];if(i.isObject(y)&&c.tryCatch(y.unsubscribe).call(y)===u.errorObject){e=!0,t=t||[];var v=u.errorObject.e;v instanceof a.UnsubscriptionError?t=t.concat(n(v.errors)):t.push(v)}}if(e)throw new a.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();e.Subscription=l},function(t,e,r){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,r){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,e,r){"use strict";function n(){try{return o.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}var o,i=r(9);e.tryCatch=function(t){return o=t,n}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return n(e,t),e}(Error);e.UnsubscriptionError=o},function(t,e,r){"use strict";function n(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}var o=r(4);e.getSymbolObservable=n,e.observable=n(o.root),e.$$observable=e.observable},function(t,e,r){"use strict";var n=r(3),o=r(24);n.Observable.prototype.map=o.map},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(5);e.map=function(t,e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new i(t,e))};var i=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}();e.MapOperator=i;var s=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.count=0,this.thisArg=n||this}return n(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(3),o=r(26);n.Observable.prototype.do=o._do,n.Observable.prototype._do=o._do},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(5);e._do=function(t,e,r){return this.lift(new i(t,e,r))};var i=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.nextOrObserver,this.error,this.complete))},t}(),s=function(t){function e(e,r,n,i){t.call(this,e);var s=new o.Subscriber(r,n,i);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return n(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(o.Subscriber)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(){var t=document.createElement("canvas"),e=t.getContext("2d");return function(r){var n=r.videoWidth,o=r.videoHeight;return t.width=n,t.height=o,e.drawImage(r,0,0,n,o),e.getImageData(0,0,n,o)}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=n(r(2)),c=n(r(1)),u=function(t){function e(t,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.video=t,o.options=Object.assign({},{autoplay:!1},n),o.video.autoplay=o.options.autoplay,o.captureFrame=r,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"createVideoElement",value:function(t){var e=document.createElement("video");return e.src=t,e.crossOrigin="anonymous",e.controls=!0,document.body.appendChild(e),e}},{key:"onRead",value:function(t){var e=this,r=this.video;this.playbackLoop=function(){r.paused||r.ended||(t.next(c.default.fromImageData(e.captureFrame(r))),requestAnimationFrame(e.playbackLoop))},this.onError=function(){var n=r.src,o=r.error,i=o.code,s=o.message;r.removeEventListener("play",e.playbackLoop),t.error("Error occurred while trying to play "+n+": "+i+", "+s)},r.addEventListener("error",this.onError),r.addEventListener("play",this.playbackLoop),this.options.autoplay&&r.play()}},{key:"onDispose",value:function(){this.video.removeEventListener("play",this.playbackLoop),this.video.removeEventListener("error",this.onError),this.video.parentNode&&this.video.parentNode.removeChild(this.video)}}],[{key:"fromVideoElement",value:function(t,r){return console.log("read from video element"),new e(t,o(),r).read()}},{key:"fromURL",value:function(t,r){return console.log("read from url "+t),new e(t,o(),r).read()}}]),e}(s.default);e.default=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=n(r(2)),s=n(r(1)),c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.idata=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"onRead",value:function(t){t.next(s.default.fromImageData(this.idata)),t.complete()}}],[{key:"fromImageData",value:function(t){return new e(t).read()}},{key:"fromCanvas",value:function(t,r,n,o,i){var s=t.getContext("2d").getImageData(r||0,n||0,o||t.width,i||t.height);return e.fromImageData(s)}}]),e}(i.default);e.default=c},function(t,e,r){"use strict";function n(t,e){return(0,o.default)(1,e||0)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e){return n(e,t)}},e.brightness=n;var o=function(t){return t&&t.__esModule?t:{default:t}}(r(6))},function(t,e,r){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,o.linearTransformation)(t,e,0)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e){return n(e,t)}},e.contrast=n;var o=r(6)},function(t,e,r){"use strict";function n(t){return t.process((function(t,e){e.inverse(t).clamp(t)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return function(t){return n(t)}},e.inverse=n},function(t,e,r){"use strict";function n(t){return t.process((function(t,e){e.desaturate(t)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return function(t){return n(t)}},e.desaturate=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLRenderer=e.SIMPLE_CHARSET=e.ASCII_CHARSET=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},i=r(7);Object.defineProperty(e,"ASCII_CHARSET",{enumerable:!0,get:function(){return i.ASCII_CHARSET}}),Object.defineProperty(e,"SIMPLE_CHARSET",{enumerable:!0,get:function(){return i.SIMPLE_CHARSET}}),e.default=function(t){var e=new c(t);return function(t){return e.render(t)}};var s=function(t){return t&&t.__esModule?t:{default:t}}(i),c=e.HTMLRenderer=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Object.assign({},{tagName:"pre",fontSize:7,background:"#fff",color:"#000",gradient:null},t)));return r.el=r.options.el||document.createElement(r.options.tagName),r.el.style.fontSize=r.options.fontSize+"px",r.el.style.fontFamily=r.options.fontFamily,r.el.style.backgroundColor=r.options.background,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"render",value:function(t){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t),t.meta.colored||(this.el.style.color=this.options.gradient),function(t){var e=function(t){return function(e){for(var r=e.width,n=e.data,o="",i=r,s=0,c=n.length;s<c;s++,i--)0===i&&(o+="\n",i=r),o+=t(n[s]);return o}}((function(t){var e=t.char;return'<span style="color: rgb('+t.r+", "+t.g+", "+t.b+')">'+e+"</span>"}));return function(r){return t.innerHTML=e(r),t}}(this.el)(t)}},{key:"createGradient",value:function(){var t=this,e=this.ctx.createLinearGradient(0,0,this.el.width,this.el.height);this.options.gradient.forEach((function(r,n){e.addColorStop(n/(t.options.gradient.length-1),r)})),this.gradient=e,console.log("create gradient in html ",e)}}]),e}(s.default)},function(t,e,r){"use strict";function n(t,e){for(var r=o(t,e),n=r.getContext("2d").getImageData(0,0,r.width,r.height),i=new Uint32Array(n.data.buffer),s=0,c=i.length,u=void 0;c--;)s+=((255&(u=i[c]))+(u>>8&255)+(u>>16&255))/3;return s/(r.width*r.height)}function o(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fontFamily,r=void 0===e?"monospace":e,n=s(),o=n.canvas,i=n.ctx;return i.fillStyle="#fff",i.fillRect(0,0,o.width,o.height),i.fillStyle="#000",i.textBaseline="top",i.textAlign="left",i.font="20px "+r,i.fillText(t,0,0),o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var r=new Array(t.length),o=255,s=0,c=0;c<t.length;c++){var u=t[c],a=n(u,e);a<o&&(o=a),a>s&&(s=a),r[c]={char:u,brightness:a}}return r.map((function(t){var e=t.char,r=t.brightness;return{char:e,brightness:~~(0,i.mapRange)(r,o,s,0,255)}})).sort((function(t,e){return t.brightness<e.brightness?-1:t.brightness>e.brightness?1:0}))};var i=r(0),s=function(t){return t._result=null,function(){return t._result||(t._result=t())}}((function(){var t=document.createElement("canvas"),e=t.getContext("2d",{alpha:!1});return t.width=15,t.height=25,{canvas:t,ctx:e}}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasRenderer=e.SIMPLE_CHARSET=e.ASCII_CHARSET=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},i=r(7);Object.defineProperty(e,"ASCII_CHARSET",{enumerable:!0,get:function(){return i.ASCII_CHARSET}}),Object.defineProperty(e,"SIMPLE_CHARSET",{enumerable:!0,get:function(){return i.SIMPLE_CHARSET}}),e.default=function(t){var e=new c(t);return function(t){return e.render(t)}};var s=function(t){return t&&t.__esModule?t:{default:t}}(i),c=e.CanvasRenderer=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Object.assign({},{fontSize:7,lineHeight:7,charWidth:4.2,width:400,height:300,background:"#fff",color:"#000",gradient:null},t)));return r.el=r.options.el||document.createElement("canvas"),r.el.width=r.options.width,r.el.height=r.options.height,r.ctx=r.el.getContext("2d"),r.ctx.textBaseline="top",r.ctx.textAlign="start",r.ctx.font=r.options.fontSize+"px "+r.options.fontFamily,r.options.gradient?r.createGradientStop():r.el.style.backgroundColor=r.options.background,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"createGradient",value:function(){var t=this,e=this.ctx.createLinearGradient(0,0,this.el.width,this.el.height);this.options.gradient.forEach((function(r,n){e.addColorStop(r/(t.options.gradient.length-1),n)})),this.gradient=e}},{key:"createGradientStop",value:function(){var t=this.ctx.createLinearGradient(0,0,this.el.width,this.el.height);this.options.gradient.forEach((function(e,r){t.addColorStop(e,r)})),this.gradient=t}},{key:"render",value:function(t){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t),this.clearCanvas(),(t.meta.colored?function(t,e){return function(r){for(var n=r.data,o=r.width,i=e.charWidth,s=e.lineHeight,c=void 0,u=void 0,a=void 0,l=n.length;l--;)c=l%o,u=~~(l/o),a=n[l],t.fillStyle="rgb("+a.r+", "+a.g+", "+a.b+")",t.fillText(n[l].char,c*i,u*s)}}(this.ctx,this.options):function(t,e){return function(r){var n=r.data,o=r.width,i=e.lineHeight,s=void 0,c="";t.fillStyle=e.color;for(var u=0,a=n.length;u<a;u+=o){s=~~(u/o),c="";for(var l=u;l<u+o;l++)c+=n[l].char;t.fillText(c,0,s*i)}}}(this.ctx,this.options))(t),this.el}},{key:"clearCanvas",value:function(){this.gradient?this.ctx.fillStyle=this.gradient:this.ctx.fillStyle=this.options.background,this.ctx.fillRect(0,0,this.el.width,this.el.height)}}]),e}(s.default)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){for(var r=e.width,n=e.height,o=e.colored,a=void 0!==o&&o,l=t.width/r,f=t.height/n,h=255,p=0,d=new Array(r*n),b=0,y=0;y<n;y++)for(var v=0;v<r;v++){var g=i(t,~~(v*l),~~(y*f),l,f);g.mono>p&&(p=g.mono),g.mono<h&&(h=g.mono),d[b++]=g}var m=new c.default({width:r,height:n,data:d,colorProcessor:u.default,meta:{colored:a}});return s(m,h,p),m}function i(t,e,r,n,o){for(var i={r:0,g:0,b:0},s=0,c=0;c<o;c++)for(var u=0;u<n;u++)a.default.addc(i,t.getAt(e+u,r+c)),s++;return a.default.div(i,s),{r:i.r,g:i.g,b:i.b,mono:a.default.getGrayscale(i)}}function s(t,e,r){t.process((function(t){t.mono=~~(0,l.mapRange)(t.mono,e,r,0,255)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e){return o(e,t)}},e.aa=o;var c=n(r(1)),u=n(r(37)),a=n(r(12)),l=r(0)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default={mul:function(t,e){return t.mono=~~(t.mono*e),this},add:function(t,e){return t.mono+=e,this},div:function(t,e){this.mul(t,1/e)},inverse:function(t){return t.mono=255-t.mono,this},desaturate:function(t){return t.r=t.g=t.b=t.mono,t},clamp:function(t){return t.mono=(0,n.clampByte)(t.mono),this}}}])},707:(t,e,r)=>{"use strict";var n=r(901),o=r(518),i=r(404),s=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=o.toSubscriber(t,e,r);if(n?n.call(i,this.source):i.add(this.source?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?e=n.root.Rx.config.Promise:n.root.Promise&&(e=n.root.Promise)),!e)throw new Error("no Promise impl found");return new e((function(e,n){var o;o=r.subscribe((function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)}),n,e)}))},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[i.observable]=function(){return this},t.create=function(e){return new t(e)},t}();e.Observable=s},432:(t,e)=>{"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},308:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(497),i=r(303),s=r(432),c=r(429),u=function(t){function e(r,n,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!r){this.destination=s.empty;break}if("object"==typeof r){r instanceof e?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new a(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new a(this,r,n,o)}}return n(e,t),e.prototype[c.rxSubscriber]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(i.Subscription);e.Subscriber=u;var a=function(t){function e(e,r,n,i){var c;t.call(this),this._parentSubscriber=e;var u=this;o.isFunction(r)?c=r:r&&(c=r.next,n=r.error,i=r.complete,r!==s.empty&&(u=Object.create(r),o.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=c,this._error=n,this._complete=i}return n(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u)},303:(t,e,r)=>{"use strict";var n=r(208),o=r(690),i=r(497),s=r(181),c=r(36),u=r(229),a=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this,a=r._parent,f=r._parents,h=r._unsubscribe,p=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var d=-1,b=f?f.length:0;a;)a.remove(this),a=++d<b&&f[d]||null;if(i.isFunction(h)&&s.tryCatch(h).call(this)===c.errorObject&&(e=!0,t=t||(c.errorObject.e instanceof u.UnsubscriptionError?l(c.errorObject.e.errors):[c.errorObject.e])),n.isArray(p))for(d=-1,b=p.length;++d<b;){var y=p[d];if(o.isObject(y)&&s.tryCatch(y.unsubscribe).call(y)===c.errorObject){e=!0,t=t||[];var v=c.errorObject.e;v instanceof u.UnsubscriptionError?t=t.concat(l(v.errors)):t.push(v)}}if(e)throw new u.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function l(t){return t.reduce((function(t,e){return t.concat(e instanceof u.UnsubscriptionError?e.errors:e)}),[])}e.Subscription=a},576:(t,e,r)=>{"use strict";var n=r(707),o=r(28);n.Observable.prototype.do=o._do,n.Observable.prototype._do=o._do},359:(t,e,r)=>{"use strict";var n=r(707),o=r(947);n.Observable.prototype.map=o.map},28:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(308);e._do=function(t,e,r){return this.lift(new i(t,e,r))};var i=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.nextOrObserver,this.error,this.complete))},t}(),s=function(t){function e(e,r,n,i){t.call(this,e);var s=new o.Subscriber(r,n,i);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return n(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(o.Subscriber)},947:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(308);e.map=function(t,e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new i(t,e))};var i=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}();e.MapOperator=i;var s=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.count=0,this.thisArg=n||this}return n(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.Subscriber)},404:(t,e,r)=>{"use strict";var n=r(901);function o(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}e.getSymbolObservable=o,e.observable=o(n.root),e.$$observable=e.observable},429:(t,e,r)=>{"use strict";var n=r(901).root.Symbol;e.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},229:function(t,e){"use strict";var r=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return r(e,t),e}(Error);e.UnsubscriptionError=n},36:(t,e)=>{"use strict";e.errorObject={e:{}}},208:(t,e)=>{"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},497:(t,e)=>{"use strict";e.isFunction=function(t){return"function"==typeof t}},690:(t,e)=>{"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},901:(t,e,r)=>{"use strict";var n="undefined"!=typeof window&&window,o="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i=void 0!==r.g&&r.g,s=n||i||o;e.root=s,function(){if(!s)throw new Error("RxJS could not find any global context (window, self, global)")}()},518:(t,e,r)=>{"use strict";var n=r(308),o=r(429),i=r(432);e.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[o.rxSubscriber])return t[o.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(i.empty)}},181:(t,e,r)=>{"use strict";var n,o=r(36);function i(){try{return n.apply(this,arguments)}catch(t){return o.errorObject.e=t,o.errorObject}}e.tryCatch=function(t){return n=t,i}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";r(576),r(707),r(359);var t=r(127),e=r.n(t);const n=Array.from(new Array(95).keys()).map((t=>t+32)).map((t=>String.fromCharCode(t)));document.addEventListener("DOMContentLoaded",(()=>{fetch("../resources/Presets/presetInfo.json").then((t=>t.json())).then((t=>{O=new l(t.inverseEle,t.brightnessEle,t.contrastEle,t.gradientInfo,t.fontSize,t.charset),U()})).catch((t=>console.error("Error loading preset:",t)))}));const o=document.getElementById("image-dropdown");let i=!0;o.onchange=function(){i="canvas"===this.value,L("canvasORHTML"),console.log("iscanvas",i)};const s=.8,c=1.8;function u(t){t.id="processed-image";const e=document.getElementById("processed-image");e?(console.log("replaceImageToDiv - replace child image"),e.parentNode.replaceChild(t,e)):(console.log("replaceImageToDiv - append child image"),t.id="processed-image",document.body.appendChild(t))}function a(t){!function(t,r){const n=t.width,o=t.height,i=P.value*s,a=P.value*c,l=(P.value,P.value,function(t,e,r,n){if(0!=n&&0!=r)return{width:Math.ceil(t/r),height:Math.ceil(e/n)}}(n,o,P.value,P.value/s*c)),f={width:l.width,height:l.height,colored:!1};h=d.createLinearGradient(0,0,n,0),h.addColorStop(_.value/100,v.value),h.addColorStop(w.value/100,g.value),h.addColorStop(E.value/100,m.value);const p={fontSize:P.value,fontFamily:"Sora",lineHeight:a,charWidth:i,charset:O.charset,width:n,height:o,background:"rgba(0,0,0,0)",color:h};let b=e().read.image.fromURL(t.src);j.checked&&(console.log("inverse elemenet is checked ",j.checked),b=b.map(e().filter.inverse())),void 0!==k.value&&(console.log("brightnessValue value ",k.value),b=b.map(e().filter.brightness(k.value))),void 0!==A.value&&(console.log("contrastValue value ",A.value),b=b.map(e().filter.contrast(A.value))),b=b.map(e().aa(f)),r?b.map(e().render.canvas(p)).do((function(t){u(t)})).subscribe():b.map(e().render.html(p)).do((function(t){u(t)})).subscribe()}(t,i)}document.getElementById("imageInput").addEventListener("change",(function(t){const e=t.target.files[0];if(e&&e.type.startsWith("image/")){const t=new FileReader;t.onload=function(t){!function(t){const e=new Image;e.src=t,e.onload=function(){let t=document.getElementById("imported-image");t?(console.log("loadImageAndProcess - replace child image"),t.src=e.src,f=e):(console.log("loadImageAndProcess - append child image"),e.id="imported-image",document.body.appendChild(e)),a(f)},e.onerror=function(){console.error("Error loading the image")}}(t.target.result)},t.onerror=function(){console.error("Error loading the image")},t.readAsDataURL(e)}else console.error("File is not an image")}));class l{constructor(t,e,r,n,o,i){this.inverseEle=t,this.brightnessEle=e,this.contrastEle=r,this.gradientInfo=n,this.fontSize=o,this.charset=i}}let f,h,p=document.getElementById("gradient-canvas"),d=p.getContext("2d"),b=p.width,y=p.height,v=document.getElementById("color1"),g=document.getElementById("color2"),m=document.getElementById("color3"),_=document.getElementById("position1"),w=document.getElementById("position2"),E=document.getElementById("position3"),S=(document.getElementById("save-gradient"),new class{constructor(t,e,r,n,o,i){this.color1=t,this.color2=e,this.color3=r,this.colorPosition1=n,this.colorPosition2=o,this.colorPosition3=i}}),O=new l;v.onchange=H,g.onchange=H,m.onchange=H,_.onchange=H,w.onchange=H,E.onchange=H;let x=document.getElementById("save-preset"),j=document.getElementById("inverse"),P=document.getElementById("fontSize"),T=document.getElementById("charset-selector"),I=document.getElementById("brightness"),C=document.getElementById("contrast"),k=I.nextElementSibling.querySelector(".sliderValue"),A=C.nextElementSibling.querySelector(".sliderValue"),R=document.getElementById("imageExportRatio");document.getElementById("save-image").onclick=function(){console.log("downloadImageWithRatio is ",M);let t=document.getElementById("processed-image"),e=document.createElement("canvas"),r=e.getContext("2d"),n=t.width*M,o=t.height*M;e.width=n,e.height=o,r.drawImage(t,0,0,n,o);let i=e.toDataURL("image/png"),s=document.createElement("a");s.href=i,s.download="image.png",s.click(),e.remove()};let M=1;function L(t){f&&(console.log(`${t} - update image`),a(f))}function H(){h=d.createLinearGradient(0,0,b,0),h.addColorStop(_.value/100,v.value),h.addColorStop(w.value/100,g.value),h.addColorStop(E.value/100,m.value),d.fillStyle=h,d.fillRect(0,0,b,y),L("gradient")}function U(){console.log("load preset"),j.checked=O.inverseEle,I.value=O.brightnessEle,C.value=O.contrastEle,S=O.gradientInfo,k.innerHTML=O.brightnessEle,A.innerHTML=O.contrastEle,P.value=O.fontSize,console.log("charsetSelector value ",T.value),T.value=O.charset,console.log("presetInfo charset ",O.charset),console.log("load gradient"),_.value=S.colorPosition1,w.value=S.colorPosition2,E.value=S.colorPosition3,v.value=S.color1,g.value=S.color2,m.value=S.color3,H(),I.value!=O.brightnessEle&&(I.value=O.brightnessEle),C.value!=O.contrastEle&&(C.value=O.contrastEle),j.value!=O.inverseEle&&(j.value=O.inverseEle),P.value!=O.fontSize&&(P.value=O.fontSize),T.value!=O.charset&&(O.charset.contains("SIA/")?T.target.value="SIA/":T.target.value="ASCII"),console.log("UPADTE Charset selector value is ",T.value),S!=O.gradientInfo&&(S=O.gradientInfo),console.log("preset info is ",O)}R.oninput=t=>{R.value=t.target.value,M=R.value,console.log("current image ratio is ",M),L("imageExportRatio")},window.onload=function(){console.log("PHASE 1.2 - line height and sora font"),M=R.value,T.value=O.charset,O.fontFamily="Sora",L("chartset")},P.oninput=t=>{P.value=t.target.value,L("fontSize")},I.oninput=t=>{k.textContent=t.target.value,k.value=t.target.value,L("brightness")},C.oninput=t=>{A.textContent=t.target.value,A.value=t.target.value,console.log("contrast value ",A.value),L("contrast")},j.onchange=t=>{O.inverseEle=t.target.checked,L("inverseEle")},T.onchange=t=>{"SIA/"===t.target.value?O.charset="SIA/.><?!^() ":O.charset=n,L("charset")},x.onclick=function(){console.log("save preset ",O),O.inverseEle=j.checked,O.brightnessEle=I.value,O.contrastEle=C.value,O.gradientInfo=S,S.color1=v.value,S.color2=g.value,S.color3=m.value,S.colorPosition1=_.value,S.colorPosition2=w.value,S.colorPosition3=E.value,O.fontSize=P.value,O.fontFamily="Sora",O.charset=T.value;const t=JSON.stringify(O),e=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download="presetInfo.json",document.body.appendChild(n),n.click(),document.body.removeChild(n),console.log("Preset saved to file.")};const B=document.getElementById("load-preset");B.type="file",B.addEventListener("change",(function(){this.files&&this.files[0]&&(console.log("file",this.files[0]),function(t){const e=new FileReader;e.onload=function(t){const e=JSON.parse(t.target.result);O.brightnessEle=e.brightnessEle,O.contrastEle=e.contrastEle,O.inverseEle=e.inverseEle,O.gradientInfo=e.gradientInfo,O.fontSize=e.fontSize,O.charset=e.charset,console.log("preset loaded from file: ",O),U()},e.readAsText(t)}(this.files[0]))}))})()})();